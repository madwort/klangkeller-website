<!DOCTYPE html>
<html>
  <% events.sort(function compare(a, b) {
    var dateA = new Date(a.date);
    var dateB = new Date(b.date);
    return dateA - dateB;
  });

  var future
  var today = new Date()
  var days = 86400000
  var yesterday = new Date(today - (1*days))  

  for(var i=0; i < events.length;i++) {
    future = yesterday.getTime() <= events[i].date.getTime();
    if(future === true) {

      var eventDate = events[i].date; 
      var eventDate = eventDate.toDateString()
      var count = 0
      for(var x=0; x < events[i].slotNumber;x++) {
        if(events[i].slots[x].title != undefined) {
          count++ 
        }
      } 

      var countdown = counter(eventDate, events[i].slotNumber, count) 
      var event = events[i]
      %>
       
      <%- include('../partials/event-title', {event}) %>
      <%- include('../partials/slots', {event, countdown}) %>
      <%- include('../partials/documentation-slot', {event}) %>
      <%- include('../partials/event-bar', {event}) %>
      <%- include('../partials/event-contact', {event}) %>
      <%- include('../partials/event-countdown', {countdown}) %>
      <%- include('../partials/event-admin', {event}) %>
      <% }} %>
</html>
